(this.webpackJsonpmbta=this.webpackJsonpmbta||[]).push([[0],{115:function(e,t){e.exports="e99522d8c64c485abb639ead5c22d661"},117:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),i=n.n(r),o=n(11),c=n.n(o),l=n(8),s=n(20),d=n(22),p=n(21),u=n(15),m=n(174),h=n(175),b=n(42),j=n(164),g=n(67),O=n(161),y=n(153),_=n(158),f=n(157),v=n(160),x=n(162),C=n(78),S=n.n(C),E=n(79),A=n.n(E),w=n(81),k=n.n(w),I=n(80),D=n.n(I),F=n(159),L=n(45),R=n.n(L),H=n.p+"static/media/logo.0663db85.png",U=n(77),T=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.collapseHandler=function(t){return function(){e.props.dispatch({type:"UI_SEARCH_COLLAPSE",routeId:t})}},e.popupSchedule=function(t,n){return function(){if(!e.props.loading.hasOwnProperty("".concat(t.id,"_").concat(n.id))){var a="".concat(t.id,"_").concat(n.id);e.props.dispatch({type:"UI_SCHEDULE_LOADING_ADD",schedule:a}),Promise.all([R()(t.id,n.id,0),R()(t.id,n.id,1)]).then((function(r){e.props.dispatch({type:"SEARCH_SCHEDULE",route:t,stop:n,departureTimes:r}),e.props.dispatch({type:"UI_SEARCH_DIALOG",open:!0}),e.props.dispatch({type:"UI_SCHEDULE_LOADING_REMOVE",schedule:a})})).catch((function(t){e.props.dispatch({type:"UI_SEARCH_DIALOG_SNARCK_BAR",open:!0,message:"Failed to retrieve data from server. Please check your Internet.",variant:"error"}),setTimeout((function(){e.props.dispatch({type:"UI_SCHEDULE_LOADING_REMOVE",schedule:a})}),2e3)}))}}},e.showArrowIcon=function(t,n,a){return e.props.schedules.hasOwnProperty("".concat(t,"_").concat(n,"_").concat(a))?{}:{visibility:"hidden"}},e.render=function(){var t,n=[],r=Object(g.a)(U);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(Object(a.jsxs)(y.a,{button:!0,style:{backgroundColor:i.color,opacity:.9},onClick:e.collapseHandler(i.id),children:[Object(a.jsx)(f.a,{style:{paddingLeft:"18px",marginRight:"-50px"},children:Object(a.jsx)("img",{alt:"",src:H,style:{height:"30px",width:"30px"}})}),Object(a.jsx)(_.a,{inset:!0,primary:i.name,primaryTypographyProps:{style:{color:i.text_color,fontSize:"20px"}},secondary:"".concat(i.direction[0],"bound / ").concat(i.direction[1],"bound"),secondaryTypographyProps:{style:{color:i.text_color,fontSize:"18px"}}}),e.props.collapse[i.id]?Object(a.jsx)(S.a,{}):Object(a.jsx)(A.a,{})]},i.id+"-route"));var o,c=[],l=Object(g.a)(i.stops);try{for(l.s();!(o=l.n()).done;){var s=o.value,d=e.props.loading.hasOwnProperty("".concat(i.id,"_").concat(s.id));c.push(Object(a.jsxs)(y.a,{button:!d,onClick:e.popupSchedule(i,s),children:[d&&Object(a.jsx)(F.a,{size:20,style:{marginRight:"20px"}}),Object(a.jsx)(_.a,{inset:!0,primary:s.name,style:{paddingLeft:"80px"}}),Object(a.jsx)(D.a,{style:e.showArrowIcon(i.id,s.id,0)}),Object(a.jsx)(k.a,{style:e.showArrowIcon(i.id,s.id,1)})]},s.id))}}catch(p){l.e(p)}finally{l.f()}n.push(Object(a.jsx)(v.a,{in:e.props.collapse[i.id],timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(O.a,{component:"div",disablePadding:!0,children:c})},i.id+"-collapse")),n.push(Object(a.jsx)(x.a,{light:!0},i.id+"-divider"))}}catch(p){r.e(p)}finally{r.f()}return Object(a.jsx)(O.a,{component:"nav",style:e.props.style,children:n})},e}return n}(i.a.Component),N=Object(u.b)((function(e){return{collapse:e.ui.search_collapse,schedules:e.schedules,loading:e.ui.schedule_loading}}))(T),P=n(163),B=n(82),G=n.n(B);var M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r="https://www.mbta.com/schedules/".concat(e.route.id,"/schedule?direction_id=").concat(e.direct_id,"&origin=").concat(e.stop.id),i=Object(a.jsx)("a",{href:r,target:"_blank",children:r}),o="".concat(e.route.id,"-").concat(e.stop.id,"-").concat(e.direct_id);if(0===e.departureTime.length)return[Object(a.jsx)(y.a,{children:Object(a.jsx)(_.a,{primary:"No Data",secondary:i})},o)];for(var c=[],l=0;l<n&&l<e.departureTime.length;l++){var s=new Date(e.departureTime[l]);if(!(s-t<=0)){var d=Number.parseInt((s-t)/1e3,10),p=d%60,u=(d=Number.parseInt(d/60,10))%60,m=(d=Number.parseInt(d/60,10))%24,h=p+"s",b=0===u?"":u+"m ",j=0===m?"":m+"h ";c.push(Object(a.jsx)(y.a,{style:{textAlign:"center"},children:Object(a.jsx)(_.a,{primary:s.toLocaleTimeString(),secondary:j+b+h})},"".concat(o,"-time-").concat(l)))}}return c},W=n.p+"static/media/instruction_1.77bdc7c6.png",K=n.p+"static/media/instruction_2.950ba95d.png",V=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.openDialog=function(t){return function(){var n=t.stop,a=t.destination;e.props.dispatch({type:"UI_FAVORITES_DIALOG",open:!0,message:"".concat(n.name," \u2192 ").concat(a.name),schedule:t})}},e.getListItems=function(){return Object.values(e.props.schedules).map((function(t,n){var r="sch-"+n,i=t.route,o=t.stop,c=t.direct_id,l=t.destination,s=t.isFailed,d={height:"35px",width:"35px",lineHeight:"36px",textAlign:"center",borderRadius:"50%",backgroundColor:"white",opacity:.7,marginRight:"5px",fontWeight:"bold",fontAize:"20px",color:i.color};return[Object(a.jsxs)(y.a,{style:{backgroundColor:i.color,color:i.text_color,opacity:.9},children:[""===i.short_name?"":Object(a.jsx)("div",{style:d,children:i.short_name}),Object(a.jsx)(_.a,{inset:!0,primary:"".concat(o.name," \u2192 ").concat(l.name," ").concat(s?"(Update Failed)":""),secondary:"".concat(i.direction[c],"bound"),primaryTypographyProps:{style:{color:i.text_color}},secondaryTypographyProps:{style:{color:i.text_color,fontWeight:"bold"}}}),Object(a.jsx)(P.a,{children:Object(a.jsx)(j.a,{children:Object(a.jsx)(G.a,{onClick:e.openDialog(t),style:{color:i.text_color}})})})]},r),M(t,e.props.currentTime,e.props.maxNumber),Object(a.jsx)(x.a,{},r+"-divider")]}))},e.render=function(){var t={maxWidth:"280px",width:"48%"},n=e.getListItems();return Object(a.jsx)(O.a,{style:e.props.style,children:n.length>0?n:Object(a.jsx)(y.a,{children:Object(a.jsx)(_.a,{disableTypography:!0,primary:Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Your Favorites List is empty."}),Object(a.jsx)("p",{children:'Please use the "Search" tab below and add your favorite stops to the list.'}),Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{alt:"",src:W,style:Object(l.a)(Object(l.a)({},t),{},{marginRight:"10px"})}),Object(a.jsx)("img",{alt:"",src:K,style:t})]})]})})})})},e}return n}(i.a.Component),q=Object(u.b)((function(e){return{currentTime:e.currentTime,schedules:e.schedules,maxNumber:e.preference.max_schedule_number}}))(V),J=n(180),z=n(166),Q=n(167),X=n(165),Y=n(168),$=n(169),Z=n(178);function ee(e){return Object(a.jsx)(X.a,Object(l.a)({direction:"up"},e))}var te=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.close=function(){e.props.dispatch({type:"UI_PREFRENCE_DIALOG",open:!1})},e.getOptions=function(){var e=[1,2,3,4,5,10].map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}));return e.push(Object(a.jsx)("option",{value:99,children:"All"},99)),e},e.maxNumberChange=function(t){e.props.dispatch({type:"MAX_SCHEDULE_NUM",number:t.target.value})},e.render=function(){return Object(a.jsxs)(J.a,{open:e.props.dialog,TransitionComponent:ee,keepMounted:!0,onClose:e.close,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsx)(z.a,{id:"alert-dialog-title",style:{textAlign:"center"},children:"Preference"}),Object(a.jsx)(Q.a,{children:Object(a.jsxs)(Y.a,{component:"fieldset",children:[Object(a.jsxs)($.a,{children:[Object(a.jsx)("u",{children:"Max"})," number of schedules"]}),Object(a.jsx)(Z.a,{margin:"normal",value:e.props.maxNumber,onChange:e.maxNumberChange,select:!0,SelectProps:{native:!0,style:{textAlignLast:"center"}},style:{paddingBottom:"8px"},children:e.getOptions()})]})})]})},e}return n}(i.a.Component),ne=Object(u.b)((function(e){return{dialog:e.ui.preference_dialog,maxNumber:e.preference.max_schedule_number}}))(te),ae=n(172),re=n(171),ie=n(173),oe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.closeDialog=function(){e.props.dispatch({type:"UI_FAVORITES_DIALOG",open:!1,message:""})},e.removeSchedule=function(t){return function(){e.props.dispatch({type:"SCHEDULE_REMOVE",route_id:t.route.id,stop_id:t.stop.id,direct_id:t.direct_id}),e.closeDialog()}},e.render=function(){return Object(a.jsxs)(J.a,{open:e.props.dialog.open,onClose:e.closeDialog,keepMounted:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(z.a,{id:"alert-dialog-title",children:"Do you want to remove this schedule?"}),Object(a.jsx)(Q.a,{children:Object(a.jsx)(re.a,{id:"alert-dialog-description",children:e.props.dialog.message})}),Object(a.jsxs)(ae.a,{children:[Object(a.jsx)(ie.a,{onClick:e.removeSchedule(e.props.dialog.schedule),color:"primary",children:"REMOVE"}),Object(a.jsx)(ie.a,{onClick:e.closeDialog,color:"primary",autoFocus:!0,children:"CANCEL"})]})]})},e}return n}(i.a.Component),ce=Object(u.b)((function(e){return{dialog:e.ui.favorites_dialog}}))(oe),le=n(84),se=n.n(le),de=n(55),pe=n.n(de),ue=n(83),me=n.n(ue);function he(e){return Object(a.jsx)(X.a,Object(l.a)({direction:"up"},e))}var be=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.dialogClose=function(){e.props.dispatch({type:"UI_SEARCH_DIALOG",open:!1})},e.isScheduleExist=function(t){var n=t.route,a=t.stop,r=t.direct_id;return e.props.schedules.hasOwnProperty("".concat(n.id,"_").concat(a.id,"_").concat(r))},e.hasTrain=function(e){return e.stop.id!==e.destination.id},e.openSnackbar=function(t){e.props.dispatch({type:"UI_SEARCH_DIALOG_SNARCK_BAR",open:!0,message:t})},e.addScheduleToggle=function(t){return function(){var n=t.route,a=t.stop,r=t.direct_id,i=t.departureTime,o=t.destination,c="".concat(a.name," \u2192 ").concat(o.name);e.isScheduleExist(t)?(e.props.dispatch({type:"SCHEDULE_REMOVE",route_id:n.id,stop_id:a.id,direct_id:r}),e.openSnackbar('Remove "'.concat(c,'" from Favorites List'))):(e.props.dispatch({type:"SCHEDULE_ADD",route:n,stop:a,direct_id:r,departureTime:i}),e.openSnackbar('Add "'.concat(c,'" to Favorites List')))}},e.getListItems=function(t){var n=t.route,r=t.stop,i=t.direct_id,o=t.destination,c="".concat(n.id,"_").concat(r.id,"_").concat(i);return[Object(a.jsxs)(y.a,{children:[Object(a.jsx)(_.a,{primary:"".concat(r.name," \u2192 ").concat(o.name),secondary:"".concat(n.direction[i],"bound"),secondaryTypographyProps:{style:{fontWeight:"bold"}}}),Object(a.jsx)(P.a,{children:Object(a.jsx)(j.a,{onClick:e.addScheduleToggle(t),children:e.isScheduleExist(t)?Object(a.jsx)(pe.a,{}):Object(a.jsx)(me.a,{})})})]},c),M(t,e.props.currentTime,e.props.maxNumber)]},e.render=function(){var t=e.props.search,n=t.inbound,r=t.outbound;return Object(a.jsxs)(J.a,{open:e.props.dialog,TransitionComponent:he,keepMounted:!0,fullScreen:!0,onClose:e.dialogClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(a.jsx)(m.a,{position:"sticky",style:{backgroundColor:n.route.color,color:n.route.text_color},children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(f.a,{children:Object(a.jsx)("img",{alt:"",src:H,style:{height:"30px",width:"30px"}})}),Object(a.jsx)(b.a,{type:"title",color:"inherit",style:{margin:"auto",fontSize:"16px"},children:e.props.currentTime.toLocaleTimeString()}),Object(a.jsx)(j.a,{color:"inherit",children:Object(a.jsx)(se.a,{onClick:e.dialogClose})})]})}),Object(a.jsx)(Q.a,{children:Object(a.jsxs)(O.a,{children:[e.hasTrain(n)&&e.getListItems(n),e.hasTrain(n)&&e.hasTrain(r)&&Object(a.jsx)(x.a,{}),e.hasTrain(r)&&e.getListItems(r)]})})]})},e}return n}(i.a.Component),je=Object(u.b)((function(e){return{currentTime:e.currentTime,dialog:e.ui.search_dialog,search:e.searchSchedule,schedules:e.schedules,maxNumber:e.preference.max_schedule_number}}))(be),ge=n(5),Oe=n(181),ye=n(85),_e=n.n(ye),fe=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.close=function(){e.props.dispatch({type:"UI_SEARCH_DIALOG_SNARCK_BAR",open:!1})},e.render=function(){return Object(a.jsx)(Oe.a,{open:e.props.open,message:e.props.message,onClose:e.close,anchorOrigin:{vertical:"bottom",horizontal:"center"},ContentProps:{classes:{root:e.props.classes[e.props.variant],message:e.props.classes.message,action:e.props.classes.action}},action:Object(a.jsx)(j.a,{color:"inherit",onClick:e.close,children:Object(a.jsx)(_e.a,{})})})},e}return n}(i.a.Component),ve=Object(u.b)((function(e){return{open:e.ui.snackbar.open,message:e.ui.snackbar.message,variant:e.ui.snackbar.variant}}))(Object(ge.a)({message:{width:"280px"},action:{paddingLeft:"0px"},success:{backgroundColor:"#5C9D51"},info:{backgroundColor:"#3476CC"},warning:{backgroundColor:"#F3A33A"},error:{backgroundColor:"#C33E38"}})(fe)),xe=n(176),Ce=n(177),Se=n(88),Ee=n.n(Se),Ae=n(86),we=n.n(Ae),ke=n(87),Ie=n.n(ke),De=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={},r.updateSchedule=function(e){var t=Object(l.a)({},r.props.schedules),n=[];for(var a in t){var i=t[a];n.push(R()(i.route.id,i.stop.id,i.direct_id))}r.props.dispatch({type:"UI_SCHEDULE_REFRESH",refreshing:!0}),Promise.all(n).then((function(e){var n=0;for(var a in t){t[a].departureTime=e[n++]}r.props.dispatch({type:"SCHEDULE_UPDATE",schedules:t}),r.props.dispatch({type:"UI_SCHEDULE_REFRESH",refreshing:!1})})).catch((function(t){e&&r.props.dispatch({type:"UI_SEARCH_DIALOG_SNACK_BAR",open:!0,message:"Failed to retrieve data from server. Please check your Internet.",variant:"error"})}))},r.panelChange=function(e,t){r.props.dispatch({type:"UI_PANEL_CHANGE",panel:t})},r.openPreference=function(){r.props.dispatch({type:"UI_PREFRENCE_DIALOG",open:!0})},r.showPanel=function(e){if(e!==r.props.panel)return{display:"none"}},r.render=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ne,{}),Object(a.jsx)(ce,{}),Object(a.jsx)(je,{}),Object(a.jsx)(ve,{}),Object(a.jsx)(m.a,{position:"sticky",style:{backgroundColor:"#1f88ff",color:"white"},children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(j.a,{color:"inherit",onClick:r.openPreference,children:Object(a.jsx)(we.a,{})}),Object(a.jsx)(b.a,{type:"title",color:"inherit",style:{margin:"auto",position:"relative",fontSize:"24px"},children:"MBTA Schedule"}),Object(a.jsx)(j.a,{color:"inherit",onClick:r.updateSchedule,children:Object(a.jsx)(Ie.a,{})})]})}),Object(a.jsxs)("div",{style:{marginTop:"-6px",marginBottom:"45px"},children:[Object(a.jsx)(N,{style:r.showPanel(0)}),Object(a.jsx)(q,{style:r.showPanel(1)})]}),Object(a.jsxs)(xe.a,{showLabels:!0,value:r.props.panel,onChange:r.panelChange,style:{position:"fixed",bottom:0,width:"100%",backgroundColor:"WhiteSmoke"},children:[Object(a.jsx)(Ce.a,{label:"Search",icon:Object(a.jsx)(Ee.a,{})}),Object(a.jsx)(Ce.a,{label:"Favorites",icon:Object(a.jsx)(pe.a,{})})]})]})},r.updateSchedule(),setInterval((function(){r.updateSchedule()}),1e4),r}return n}(i.a.Component),Fe=Object(u.b)((function(e){return{currentTime:e.currentTime,schedules:e.schedules,panel:e.ui.panel,refreshing:e.ui.schedule_is_refreshing}}))(De),Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var He=n(44),Ue={search_collapse:JSON.parse(localStorage.getItem("search_collapse")||"{}"),panel:Number.parseInt(localStorage.getItem("panel")||"0",10),search_dialog:!1,schedule_loading:{},preference_dialog:!1,schedule_is_refreshing:!1,snackbar:{open:!1,message:"",variant:""},favorites_dialog:{open:!1,message:"",schedule:{}}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0,n=e;if("UI_PANEL_CHANGE"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{panel:t.panel})),"UI_SEARCH_COLLAPSE"===t.type){var a=Object(l.a)({},e.search_collapse);a[t.routeId]=!a[t.routeId],n=Object(l.a)(Object(l.a)({},e),{},{search_collapse:a})}if("UI_SEARCH_DIALOG"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{search_dialog:t.open})),"UI_SCHEDULE_LOADING_ADD"===t.type){var r=Object(l.a)({},e.schedule_loading);r[t.schedule]=!0,n=Object(l.a)(Object(l.a)({},e),{},{schedule_loading:r})}if("UI_SCHEDULE_LOADING_REMOVE"===t.type){var i=Object(l.a)({},e.schedule_loading);delete i[t.schedule],n=Object(l.a)(Object(l.a)({},e),{},{schedule_loading:i})}return"UI_PREFRENCE_DIALOG"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{preference_dialog:t.open})),"UI_SCHEDULE_REFRESH"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{schedule_is_refreshing:t.refreshing})),"UI_SEARCH_DIALOG_SNACK_BAR"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{snackbar:{open:t.open,message:t.message,variant:t.variant}})),"UI_FAVORITES_DIALOG"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{favorites_dialog:{open:t.open,message:t.message,schedule:t.schedule}})),localStorage.setItem("panel",n.panel),localStorage.setItem("search_collapse",JSON.stringify(n.search_collapse)),n},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0;return"TIME_UPDATE"===t.type?new Date:e},Pe=n(50),Be=JSON.parse(localStorage.getItem("schedules")||"{}"),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,n=e;if("SCHEDULE_ADD"===t.type){var a=t.route,r=t.stop,i=t.direct_id,o=[a.id,r.id,i].join("_");n=Object(l.a)(Object(l.a)({},e),{},Object(Pe.a)({},o,{route:{id:a.id,name:a.name,short_name:a.short_name,color:a.color,text_color:a.text_color,direction:a.direction},stop:r,direct_id:i,destination:a.stops[1===i?0:a.stops.length-1],isFailed:!1,departureTime:t.departureTime}))}if("SCHEDULE_REMOVE"===t.type){var c=[t.route_id,t.stop_id,t.direct_id].join("_");delete(n=Object(l.a)({},e))[c]}return"SCHEDULE_UPDATE"===t.type&&(n=t.schedules),localStorage.setItem("schedules",JSON.stringify(n)),n},Me={route:{direction:[]},stop:{},destination:{},departureTime:[]},We={inbound:Me,outbound:Me},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;if("SEARCH_SCHEDULE"===t.type){var n=t.route,a=t.stop,r=t.departureTimes;return{inbound:{route:n,stop:a,direct_id:0,destination:n.stops[n.stops.length-1],isFailed:!1,departureTime:r[0]},outbound:{route:n,stop:a,direct_id:1,destination:n.stops[0],isFailed:!1,departureTime:r[1]}}}return e},Ve={max_schedule_number:Number.parseInt(localStorage.getItem("max_schedule_number")||"3",10)},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=e;return"MAX_SCHEDULE_NUM"===t.type&&(n=Object(l.a)(Object(l.a)({},e),{},{max_schedule_number:t.number})),localStorage.setItem("max_schedule_number",n.max_schedule_number),n},Je=Object(He.b)({ui:Te,currentTime:Ne,schedules:Ge,searchSchedule:Ke,preference:qe}),ze=Object(He.c)(Je);setInterval((function(){ze.dispatch({type:"TIME_UPDATE"})}),500),c.a.render(Object(a.jsx)(u.a,{store:ze,children:Object(a.jsx)(Fe,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/mbta",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/mbta","/service-worker.js");Le?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Re(e)}))}}()},45:function(e,t,n){var a=n(114),r=n(115);e.exports=function(e,t,n){var i="https://api-v3.mbta.com/predictions?"+"filter[stop]=".concat(t,"&")+"filter[direction_id]=".concat(n,"&")+"filter[route]=".concat(e,"&")+"sort=departure_time&"+"api_key=".concat(r);return a(i).then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){return e.attributes.departure_time}))}))}},77:function(e){e.exports=JSON.parse('[{"id":"Red","relationships":{"line":{"data":{"id":"line-Red","type":"line"}},"route_patterns":{}},"name":"Red Line","short_name":"","color":"#DA291C","text_color":"#FFFFFF","direction":["South","North"],"stops":[{"id":"place-asmnl","name":"Ashmont"},{"id":"place-brntn","name":"Braintree"},{"id":"place-qamnl","name":"Quincy Adams"},{"id":"place-qnctr","name":"Quincy Center"},{"id":"place-wlsta","name":"Wollaston"},{"id":"place-nqncy","name":"North Quincy"},{"id":"place-smmnl","name":"Shawmut"},{"id":"place-fldcr","name":"Fields Corner"},{"id":"place-shmnl","name":"Savin Hill"},{"id":"place-jfk","name":"JFK/UMass"},{"id":"place-andrw","name":"Andrew"},{"id":"place-brdwy","name":"Broadway"},{"id":"place-sstat","name":"South Station"},{"id":"place-dwnxg","name":"Downtown Crossing"},{"id":"place-pktrm","name":"Park Street"},{"id":"place-chmnl","name":"Charles/MGH"},{"id":"place-knncl","name":"Kendall/MIT"},{"id":"place-cntsq","name":"Central"},{"id":"place-harsq","name":"Harvard"},{"id":"place-portr","name":"Porter"},{"id":"place-davis","name":"Davis"},{"id":"place-alfcl","name":"Alewife"}]},{"id":"Orange","relationships":{"line":{"data":{"id":"line-Orange","type":"line"}},"route_patterns":{}},"name":"Orange Line","short_name":"","color":"#ED8B00","text_color":"#FFFFFF","direction":["South","North"],"stops":[{"id":"place-ogmnl","name":"Oak Grove"},{"id":"place-mlmnl","name":"Malden Center"},{"id":"place-welln","name":"Wellington"},{"id":"place-astao","name":"Assembly"},{"id":"place-sull","name":"Sullivan Square"},{"id":"place-ccmnl","name":"Community College"},{"id":"place-north","name":"North Station"},{"id":"place-haecl","name":"Haymarket"},{"id":"place-state","name":"State"},{"id":"place-dwnxg","name":"Downtown Crossing"},{"id":"place-chncl","name":"Chinatown"},{"id":"place-tumnl","name":"Tufts Medical Center"},{"id":"place-bbsta","name":"Back Bay"},{"id":"place-masta","name":"Massachusetts Avenue"},{"id":"place-rugg","name":"Ruggles"},{"id":"place-rcmnl","name":"Roxbury Crossing"},{"id":"place-jaksn","name":"Jackson Square"},{"id":"place-sbmnl","name":"Stony Brook"},{"id":"place-grnst","name":"Green Street"},{"id":"place-forhl","name":"Forest Hills"}]},{"id":"Green-B","relationships":{"line":{"data":{"id":"line-Green","type":"line"}},"route_patterns":{}},"name":"Green Line B","short_name":"B","color":"#00843D","text_color":"#FFFFFF","direction":["West","East"],"stops":[{"id":"place-pktrm","name":"Park Street"},{"id":"place-boyls","name":"Boylston"},{"id":"place-armnl","name":"Arlington"},{"id":"place-coecl","name":"Copley"},{"id":"place-hymnl","name":"Hynes Convention Center"},{"id":"place-kencl","name":"Kenmore"},{"id":"place-bland","name":"Blandford Street"},{"id":"place-buest","name":"Boston University East"},{"id":"place-bucen","name":"Boston University Central"},{"id":"place-buwst","name":"Boston University West"},{"id":"place-stplb","name":"Saint Paul Street"},{"id":"place-plsgr","name":"Pleasant Street"},{"id":"place-babck","name":"Babcock Street"},{"id":"place-brico","name":"Packards Corner"},{"id":"place-harvd","name":"Harvard Avenue"},{"id":"place-grigg","name":"Griggs Street"},{"id":"place-alsgr","name":"Allston Street"},{"id":"place-wrnst","name":"Warren Street"},{"id":"place-wascm","name":"Washington Street"},{"id":"place-sthld","name":"Sutherland Road"},{"id":"place-chswk","name":"Chiswick Road"},{"id":"place-chill","name":"Chestnut Hill Avenue"},{"id":"place-sougr","name":"South Street"},{"id":"place-lake","name":"Boston College"}]},{"id":"Green-C","relationships":{"line":{"data":{"id":"line-Green","type":"line"}},"route_patterns":{}},"name":"Green Line C","short_name":"C","color":"#00843D","text_color":"#FFFFFF","direction":["West","East"],"stops":[{"id":"place-north","name":"North Station"},{"id":"place-haecl","name":"Haymarket"},{"id":"place-gover","name":"Government Center"},{"id":"place-pktrm","name":"Park Street"},{"id":"place-boyls","name":"Boylston"},{"id":"place-armnl","name":"Arlington"},{"id":"place-coecl","name":"Copley"},{"id":"place-hymnl","name":"Hynes Convention Center"},{"id":"place-kencl","name":"Kenmore"},{"id":"place-smary","name":"Saint Mary\'s Street"},{"id":"place-hwsst","name":"Hawes Street"},{"id":"place-kntst","name":"Kent Street"},{"id":"place-stpul","name":"Saint Paul Street"},{"id":"place-cool","name":"Coolidge Corner"},{"id":"place-sumav","name":"Summit Avenue"},{"id":"place-bndhl","name":"Brandon Hall"},{"id":"place-fbkst","name":"Fairbanks Street"},{"id":"place-bcnwa","name":"Washington Square"},{"id":"place-tapst","name":"Tappan Street"},{"id":"place-denrd","name":"Dean Road"},{"id":"place-engav","name":"Englewood Avenue"},{"id":"place-clmnl","name":"Cleveland Circle"}]},{"id":"Green-D","relationships":{"line":{"data":{"id":"line-Green","type":"line"}},"route_patterns":{}},"name":"Green Line D","short_name":"D","color":"#00843D","text_color":"#FFFFFF","direction":["West","East"],"stops":[{"id":"place-river","name":"Riverside"},{"id":"place-woodl","name":"Woodland"},{"id":"place-waban","name":"Waban"},{"id":"place-eliot","name":"Eliot"},{"id":"place-newtn","name":"Newton Highlands"},{"id":"place-newto","name":"Newton Centre"},{"id":"place-chhil","name":"Chestnut Hill"},{"id":"place-rsmnl","name":"Reservoir"},{"id":"place-bcnfd","name":"Beaconsfield"},{"id":"place-brkhl","name":"Brookline Hills"},{"id":"place-bvmnl","name":"Brookline Village"},{"id":"place-longw","name":"Longwood"},{"id":"place-fenwy","name":"Fenway"},{"id":"place-kencl","name":"Kenmore"},{"id":"place-hymnl","name":"Hynes Convention Center"},{"id":"place-coecl","name":"Copley"},{"id":"place-armnl","name":"Arlington"},{"id":"place-boyls","name":"Boylston"},{"id":"place-pktrm","name":"Park Street"},{"id":"place-gover","name":"Government Center"}]},{"id":"Green-E","relationships":{"line":{"data":{"id":"line-Green","type":"line"}},"route_patterns":{}},"name":"Green Line E","short_name":"E","color":"#00843D","text_color":"#FFFFFF","direction":["West","East"],"stops":[{"id":"place-north","name":"North Station"},{"id":"place-haecl","name":"Haymarket"},{"id":"place-gover","name":"Government Center"},{"id":"place-pktrm","name":"Park Street"},{"id":"place-boyls","name":"Boylston"},{"id":"place-armnl","name":"Arlington"},{"id":"place-coecl","name":"Copley"},{"id":"place-prmnl","name":"Prudential"},{"id":"place-symcl","name":"Symphony"},{"id":"place-nuniv","name":"Northeastern University"},{"id":"place-mfa","name":"Museum of Fine Arts"},{"id":"place-lngmd","name":"Longwood Medical Area"},{"id":"place-brmnl","name":"Brigham Circle"},{"id":"place-fenwd","name":"Fenwood Road"},{"id":"place-mispk","name":"Mission Park"},{"id":"place-rvrwy","name":"Riverway"},{"id":"place-bckhl","name":"Back of the Hill"},{"id":"place-hsmnl","name":"Heath Street"}]},{"id":"Blue","relationships":{"line":{"data":{"id":"line-Blue","type":"line"}},"route_patterns":{}},"name":"Blue Line","short_name":"","color":"#003DA5","text_color":"#FFFFFF","direction":["West","East"],"stops":[{"id":"place-wondl","name":"Wonderland"},{"id":"place-rbmnl","name":"Revere Beach"},{"id":"place-bmmnl","name":"Beachmont"},{"id":"place-sdmnl","name":"Suffolk Downs"},{"id":"place-orhte","name":"Orient Heights"},{"id":"place-wimnl","name":"Wood Island"},{"id":"place-aport","name":"Airport"},{"id":"place-mvbcl","name":"Maverick"},{"id":"place-aqucl","name":"Aquarium"},{"id":"place-state","name":"State"},{"id":"place-gover","name":"Government Center"},{"id":"place-bomnl","name":"Bowdoin"}]}]')}},[[117,1,2]]]);
//# sourceMappingURL=main.cdb14f5c.chunk.js.map